<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="randomForest implements Breiman's random forest algorithm (based on
  Breiman and Cutler's original Fortran code) for classification and
  regression.  It can also be used in unsupervised mode for assessing
  proximities among data points."><title>Classification and Regression with Random Forest — randomForest • randomForest</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Classification and Regression with Random Forest — randomForest"><meta property="og:description" content="randomForest implements Breiman's random forest algorithm (based on
  Breiman and Cutler's original Fortran code) for classification and
  regression.  It can also be used in unsupervised mode for assessing
  proximities among data points."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">randomForest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.7-1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Example_Analysis.html">Example_Analysis</a>
  </div>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Classification and Regression with Random Forest</h1>
      
      <div class="d-none name"><code>randomForest.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>randomForest</code> implements Breiman's random forest algorithm (based on
  Breiman and Cutler's original Fortran code) for classification and
  regression.  It can also be used in unsupervised mode for assessing
  proximities among data points.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for formula</span></span>
<span><span class="fu">randomForest</span><span class="op">(</span><span class="va">formula</span>, data<span class="op">=</span><span class="cn">NULL</span>, <span class="va">...</span>, <span class="va">subset</span>, na.action<span class="op">=</span><span class="va">na.fail</span><span class="op">)</span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">randomForest</span><span class="op">(</span><span class="va">x</span>, y<span class="op">=</span><span class="cn">NULL</span>,  xtest<span class="op">=</span><span class="cn">NULL</span>, ytest<span class="op">=</span><span class="cn">NULL</span>, ntree<span class="op">=</span><span class="fl">500</span>,</span>
<span>             mtry<span class="op">=</span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">is.factor</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span>             <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span> <span class="kw">else</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             weights<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>             replace<span class="op">=</span><span class="cn">TRUE</span>, classwt<span class="op">=</span><span class="cn">NULL</span>, <span class="va">cutoff</span>, <span class="va">strata</span>,</span>
<span>             sampsize <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="va">replace</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="kw">else</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="fl">.632</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             nodesize <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">is.factor</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="fl">5</span> <span class="kw">else</span> <span class="fl">1</span>,</span>
<span>             maxnodes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>             importance<span class="op">=</span><span class="cn">FALSE</span>, localImp<span class="op">=</span><span class="cn">FALSE</span>, nPerm<span class="op">=</span><span class="fl">1</span>,</span>
<span>             <span class="va">proximity</span>, oob.prox<span class="op">=</span><span class="va">proximity</span>,</span>
<span>             norm.votes<span class="op">=</span><span class="cn">TRUE</span>, do.trace<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>             keep.forest<span class="op">=</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">xtest</span><span class="op">)</span>, corr.bias<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>             keep.inbag<span class="op">=</span><span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for randomForest</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>an optional data frame containing the variables in the model.
    By default the variables are taken from the environment which
    <code>randomForest</code> is called from.</p></dd>

  <dt>subset</dt>
<dd><p>an index vector indicating which rows should be used.
    (NOTE: If given, this argument must be named.)</p></dd>

  <dt>na.action</dt>
<dd><p>A function to specify the action to be taken if NAs
    are found.  (NOTE: If given, this argument must be named.)</p></dd>

  <dt>x, formula</dt>
<dd><p>a data frame or a matrix of predictors, or a formula
    describing the model to be fitted (for the
    <code>print</code> method, an <code>randomForest</code> object).</p></dd>

  <dt>y</dt>
<dd><p>A response vector.  If a factor, classification is assumed,
    otherwise regression is assumed.  If omitted, <code>randomForest</code>
    will run in unsupervised mode.</p></dd>

  <dt>xtest</dt>
<dd><p>a data frame or matrix (like <code>x</code>) containing
    predictors for the test set.</p></dd>

  <dt>ytest</dt>
<dd><p>response for the test set.</p></dd>

  <dt>ntree</dt>
<dd><p>Number of trees to grow.  This should not be set to too
    small a number, to ensure that every input row gets predicted at
    least a few times.</p></dd>

  <dt>mtry</dt>
<dd><p>Number of variables randomly sampled as candidates at each
    split.  Note that the default values are different for
    classification (sqrt(p) where p is number of variables in <code>x</code>)
    and regression (p/3)</p></dd>

  <dt>weights</dt>
<dd><p>A vector of length same as <code>y</code> that are positive 
    weights used only in sampling data to grow each tree (not used in any
    other calculation)</p></dd>

  <dt>replace</dt>
<dd><p>Should sampling of cases be done with or without
    replacement?</p></dd>

  <dt>classwt</dt>
<dd><p>Priors of the classes.  Need not add up to one.
    Ignored for regression.</p></dd>

  <dt>cutoff</dt>
<dd><p>(Classification only)  A vector of length equal to
    number of classes.  The `winning' class for an observation is the
    one with the maximum ratio of proportion of votes to cutoff.
    Default is 1/k where k is the number of classes (i.e., majority vote
    wins).</p></dd>

  <dt>strata</dt>
<dd><p>A (factor) variable that is used for stratified sampling.</p></dd>

  <dt>sampsize</dt>
<dd><p>Size(s) of sample to draw.  For classification, if
    sampsize is a vector of the length the number of strata, then
    sampling is stratified by strata, and the elements of sampsize
    indicate the numbers to be drawn from the strata.</p></dd>

  <dt>nodesize</dt>
<dd><p>Minimum size of terminal nodes.  Setting this number
    larger causes smaller trees to be grown (and thus take less time).
    Note that the default values are different for classification (1)
    and regression (5).</p></dd>

  <dt>maxnodes</dt>
<dd><p>Maximum number of terminal nodes trees in the forest
	can have.  If not given, trees are grown to the maximum possible
	(subject to limits by <code>nodesize</code>).  If set larger than maximum
	possible, a warning is issued.</p></dd>

  <dt>importance</dt>
<dd><p>Should importance of predictors be assessed?</p></dd>

  <dt>localImp</dt>
<dd><p>Should casewise importance measure be computed?
    (Setting this to <code>TRUE</code> will override <code>importance</code>.)</p></dd>

  <dt>nPerm</dt>
<dd><p>Number of times the OOB data are permuted per tree for
    assessing variable importance.  Number larger than 1 gives slightly
    more stable estimate, but not very effective.  Currently only
    implemented for regression.</p></dd>

  <dt>proximity</dt>
<dd><p>Should proximity measure among the rows be
    calculated?</p></dd>

  <dt>oob.prox</dt>
<dd><p>Should proximity be calculated only on ``out-of-bag''
    data?</p></dd>

  <dt>norm.votes</dt>
<dd><p>If <code>TRUE</code> (default), the final result of votes
    are expressed as fractions.  If <code>FALSE</code>, raw vote counts are
    returned (useful for combining results from different runs).
    Ignored for regression.</p></dd>

  <dt>do.trace</dt>
<dd><p>If set to <code>TRUE</code>, give a more verbose output as
    <code>randomForest</code> is run.  If set to some integer, then running
    output is printed for every <code>do.trace</code> trees.</p></dd>

  <dt>keep.forest</dt>
<dd><p>If set to <code>FALSE</code>, the forest will not be
    retained in the output object.  If <code>xtest</code> is given, defaults
    to <code>FALSE</code>.</p></dd>

  <dt>corr.bias</dt>
<dd><p>perform bias correction for regression?  Note:
    Experimental.  Use at your own risk.</p></dd>

  <dt>keep.inbag</dt>
<dd><p>Should an <code>n</code> by <code>ntree</code> matrix be
    returned that keeps track of which samples are ``in-bag'' in which
    trees (but not how many times, if sampling with replacement)</p></dd>

  <dt>...</dt>
<dd><p>optional parameters to be passed to the low level function
    <code>randomForest.default</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>randomForest</code>, which is a list with the
  following components:</p>
<dl><dt>call</dt>
<dd><p>the original call to <code>randomForest</code></p></dd>

  <dt>type</dt>
<dd><p>one of <code>regression</code>, <code>classification</code>, or
    <code>unsupervised</code>.</p></dd>

  <dt>predicted</dt>
<dd><p>the predicted values of the input data based on
    out-of-bag samples.</p></dd>

  <dt>importance</dt>
<dd><p>a matrix with <code>nclass</code> + 2 (for classification)
    or two (for regression) columns.  For classification, the first
    <code>nclass</code> columns are the class-specific measures computed as
    mean descrease in accuracy.  The <code>nclass</code> + 1st column is the
    mean descrease in accuracy over all classes.  The last column is the
    mean decrease in Gini index.  For Regression, the first column is
    the mean decrease in accuracy and the second the mean decrease in MSE.
    If <code>importance=FALSE</code>, the last measure is still returned as a
    vector.</p></dd>

  <dt>importanceSD</dt>
<dd><p>The ``standard errors'' of the permutation-based
    importance measure.  For classification, a <code>p</code> by <code>nclass
      + 1</code> matrix corresponding to the first <code>nclass + 1</code> columns
    of the importance matrix.  For regression, a length <code>p</code> vector.</p></dd>

  <dt>localImp</dt>
<dd><p>a p by n matrix containing the casewise importance
    measures, the [i,j] element of which is the importance of i-th
    variable on the j-th case. <code>NULL</code> if <code>localImp=FALSE</code>.</p></dd>

  <dt>ntree</dt>
<dd><p>number of trees grown.</p></dd>

  <dt>mtry</dt>
<dd><p>number of predictors sampled for spliting at each node.</p></dd>

  <dt>forest</dt>
<dd><p>(a list that contains the entire forest; <code>NULL</code> if
    <code>randomForest</code> is run in unsupervised mode or if
    <code>keep.forest=FALSE</code>.</p></dd>

  <dt>err.rate</dt>
<dd><p>(classification only) vector error rates of the
    prediction on the input data, the i-th element being the (OOB) error rate
    for all trees up to the i-th.</p></dd>

  <dt>confusion</dt>
<dd><p>(classification only) the confusion matrix of the
    prediction (based on OOB data).</p></dd>

  <dt>votes</dt>
<dd><p>(classification only) a matrix with one row for each
    input data point and one column for each class, giving the fraction
    or number of (OOB) `votes' from the random forest.</p></dd>

  <dt>oob.times</dt>
<dd><p>number of times cases are `out-of-bag' (and thus used
    in computing OOB error estimate)</p></dd>

  <dt>proximity</dt>
<dd><p>if <code>proximity=TRUE</code> when
    <code>randomForest</code> is called, a matrix of proximity measures among
    the input (based on the frequency that pairs of data points are in
    the same terminal nodes).</p></dd>


  <dt>mse</dt>
<dd><p>(regression only) vector of mean square errors: sum of squared
    residuals divided by <code>n</code>.</p></dd>

  <dt>rsq</dt>
<dd><p>(regression only) ``pseudo R-squared'': 1 - <code>mse</code> /
    Var(y).</p></dd>

  <dt>test</dt>
<dd><p>if test set is given (through the <code>xtest</code> or additionally
  <code>ytest</code> arguments), this component is a list which contains the
  corresponding <code>predicted</code>, <code>err.rate</code>, <code>confusion</code>,
  <code>votes</code> (for classification) or <code>predicted</code>, <code>mse</code> and
  <code>rsq</code> (for regression) for the test set.  If
  <code>proximity=TRUE</code>, there is also a component, <code>proximity</code>,
  which contains the proximity among the test set as well as proximity
  between test and training data.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The <code>forest</code> structure is slightly different between
  classification and regression.  For details on how the trees are
  stored, see the help page for <code><a href="getTree.html">getTree</a></code>.</p>
<p>If <code>xtest</code> is given, prediction of the test set is done ``in
  place'' as the trees are grown.  If <code>ytest</code> is also given, and
  <code>do.trace</code> is set to some positive integer, then for every
  <code>do.trace</code> trees, the test set error is printed.  Results for the
  test set is returned in the <code>test</code> component of the resulting
  <code>randomForest</code> object.  For classification, the <code>votes</code>
  component (for training or test set data) contain the votes the cases
  received for the classes.  If <code>norm.votes=TRUE</code>, the fraction is
  given, which can be taken as predicted probabilities for the classes.</p>

<p>For large data sets, especially those with large number of variables,
  calling <code>randomForest</code> via the formula interface is not advised:
  There may be too much overhead in handling the formula.</p>
<p>The ``local'' (or casewise) variable importance is computed as
  follows:  For classification, it is the increase in percent of times a
  case is OOB and misclassified when the variable is permuted.  For
  regression, it is the average increase in squared OOB residuals when
  the variable is permuted.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Breiman, L. (2001), <em>Random Forests</em>, Machine Learning 45(1),
  5-32.</p>
<p>Breiman, L (2002), ``Manual On Setting Up, Using, And Understanding
  Random Forests V3.1'', <a href="https://www.stat.berkeley.edu/~breiman/Using_random_forests_V3.1.pdf" class="external-link">https://www.stat.berkeley.edu/~breiman/Using_random_forests_V3.1.pdf</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Andy Liaw <a href="mailto:andy_liaw@merck.com">andy_liaw@merck.com</a> and Matthew Wiener
  <a href="mailto:matthew_wiener@merck.com">matthew_wiener@merck.com</a>, based on original Fortran code by
  Leo Breiman and Adele Cutler.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="predict.randomForest.html">predict.randomForest</a></code>, <code><a href="varImpPlot.html">varImpPlot</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Classification:</span></span></span>
<span class="r-in"><span><span class="co">##data(iris)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">71</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">iris.rf</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span> <span class="va">.</span>, data<span class="op">=</span><span class="va">iris</span>, importance<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                        proximity<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">iris.rf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  randomForest(formula = Species ~ ., data = iris, importance = TRUE,      proximity = TRUE) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type of random forest: classification</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      Number of trees: 500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No. of variables tried at each split: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         OOB estimate of  error rate: 4.67%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confusion matrix:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            setosa versicolor virginica class.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> setosa         50          0         0        0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> versicolor      0         47         3        0.06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> virginica       0          4        46        0.08</span>
<span class="r-in"><span><span class="co">## Look at variable importance:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="importance.html">importance</a></span><span class="op">(</span><span class="va">iris.rf</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              setosa versicolor virginica MeanDecreaseAccuracy MeanDecreaseGini</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sepal.Length   5.88       5.87      9.21                10.62             9.37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sepal.Width    5.23       0.31      4.71                 4.94             2.45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Petal.Length  21.60      31.41     27.71                32.39            42.13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Petal.Width   22.96      33.74     32.07                33.85            45.28</span>
<span class="r-in"><span><span class="co">## Do MDS on 1 - proximity:</span></span></span>
<span class="r-in"><span><span class="va">iris.mds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cmdscale.html" class="external-link">cmdscale</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">iris.rf</span><span class="op">$</span><span class="va">proximity</span>, eig<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">op</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>pty<span class="op">=</span><span class="st">"s"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/pairs.html" class="external-link">pairs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="va">iris.mds</span><span class="op">$</span><span class="va">points</span><span class="op">)</span>, cex<span class="op">=</span><span class="fl">0.6</span>, gap<span class="op">=</span><span class="fl">0</span>,</span></span>
<span class="r-in"><span>      col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>      main<span class="op">=</span><span class="st">"Iris Data: Predictors and MDS of Proximity Based on RandomForest"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="randomForest-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">op</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">iris.mds</span><span class="op">$</span><span class="va">GOF</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.7373483 0.7989356</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## The `unsupervised' case:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">17</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">iris.urf</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">iris</span><span class="op">[</span>, <span class="op">-</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="MDSplot.html">MDSplot</a></span><span class="op">(</span><span class="va">iris.urf</span>, <span class="va">iris</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="randomForest-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## stratified sampling: draw 20, 30, and 20 of the species to grow each tree.</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">iris.rf2</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="va">iris</span><span class="op">$</span><span class="va">Species</span>, </span></span>
<span class="r-in"><span>                          sampsize<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  randomForest(x = iris[1:4], y = iris$Species, sampsize = c(20,      30, 20)) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type of random forest: classification</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      Number of trees: 500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No. of variables tried at each split: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         OOB estimate of  error rate: 4.67%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confusion matrix:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            setosa versicolor virginica class.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> setosa         50          0         0        0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> versicolor      0         47         3        0.06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> virginica       0          4        46        0.08</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Regression:</span></span></span>
<span class="r-in"><span><span class="co">## data(airquality)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">131</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ozone.rf</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">Ozone</span> <span class="op">~</span> <span class="va">.</span>, data<span class="op">=</span><span class="va">airquality</span>, mtry<span class="op">=</span><span class="fl">3</span>,</span></span>
<span class="r-in"><span>                         importance<span class="op">=</span><span class="cn">TRUE</span>, na.action<span class="op">=</span><span class="va">na.omit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ozone.rf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  randomForest(formula = Ozone ~ ., data = airquality, mtry = 3,      importance = TRUE, na.action = na.omit) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type of random forest: regression</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      Number of trees: 500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No. of variables tried at each split: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Mean of squared residuals: 302.2117</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     % Var explained: 72.46</span>
<span class="r-in"><span><span class="co">## Show "importance" of variables: higher value mean more important:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="importance.html">importance</a></span><span class="op">(</span><span class="va">ozone.rf</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         %IncMSE IncNodePurity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Solar.R    9.76      10741.33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Wind      22.15      44234.96</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Temp      43.85      53787.56</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Month      2.59       1692.48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Day        0.93       6606.39</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## "x" can be a matrix instead of a data frame:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">17</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5e2</span><span class="op">)</span>, <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/gl.html" class="external-link">gl</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">myrf</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  randomForest(x = x, y = y) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type of random forest: classification</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      Number of trees: 500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No. of variables tried at each split: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         OOB estimate of  error rate: 52%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confusion matrix:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1  2 class.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 25 25        0.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 27 23        0.54</span>
<span class="r-in"><span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">myrf</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  41  42  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   1   1   1   1   1   1   1   1   1   2   2   2   2   2   2   2   2   2   2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  81  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Levels: 1 2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## "complicated" formula:</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">swiss.rf</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">Fertility</span><span class="op">)</span> <span class="op">~</span> <span class="va">.</span> <span class="op">-</span> <span class="va">Catholic</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">Catholic</span> <span class="op">&lt;</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          data<span class="op">=</span><span class="va">swiss</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  randomForest(formula = sqrt(Fertility) ~ . - Catholic + I(Catholic &lt;      50), data = swiss) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type of random forest: regression</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      Number of trees: 500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No. of variables tried at each split: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Mean of squared residuals: 0.3277816</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     % Var explained: 44.34</span>
<span class="r-in"><span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">swiss.rf</span>, <span class="va">swiss</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Courtelary     Delemont Franches-Mnt      Moutier   Neuveville   Porrentruy </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     8.541742     8.992064     9.124838     8.760460     8.541086     8.949770 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Broye        Glane      Gruyere       Sarine      Veveyse        Aigle </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     8.933005     9.149158     8.908574     8.887482     9.117942     7.922911 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Aubonne     Avenches     Cossonay    Echallens     Grandson     Lausanne </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     8.333468     8.221398     8.031662     8.306702     8.439164     7.720665 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    La Vallee       Lavaux       Morges       Moudon        Nyone         Orbe </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     7.571783     8.193442     7.984520     8.340828     7.854661     7.872754 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Oron      Payerne Paysd'enhaut        Rolle        Vevey      Yverdon </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     8.497338     8.503535     8.411120     8.035106     7.839470     8.330708 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Conthey    Entremont       Herens     Martigwy      Monthey   St Maurice </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     8.834288     8.654145     8.757652     8.560958     8.882983     8.469376 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Sierre         Sion       Boudry La Chauxdfnd     Le Locle    Neuchatel </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     8.928218     8.635219     8.258310     8.028697     8.177889     7.779149 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Val de Ruz ValdeTravers V. De Geneve  Rive Droite  Rive Gauche </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     8.573018     8.155001     6.776675     7.527191     7.289894 </span>
<span class="r-in"><span><span class="co">## Test use of 32-level factor as a predictor:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/gl.html" class="external-link">gl</a></span><span class="op">(</span><span class="fl">53</span>, <span class="fl">10</span><span class="op">)</span>, x2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">530</span><span class="op">)</span>, y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">530</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">rf1</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">3</span><span class="op">]</span>, <span class="va">x</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>, ntree<span class="op">=</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  randomForest(x = x[-3], y = x[[3]], ntree = 10) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type of random forest: regression</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      Number of trees: 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No. of variables tried at each split: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Mean of squared residuals: 1.599315</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     % Var explained: -44.33</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Grow no more than 4 nodes per tree:</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="fu"><a href="treesize.html">treesize</a></span><span class="op">(</span><span class="fu">randomForest</span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span> <span class="va">.</span>, data<span class="op">=</span><span class="va">iris</span>, maxnodes<span class="op">=</span><span class="fl">4</span>, ntree<span class="op">=</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## test proximity in regression</span></span></span>
<span class="r-in"><span><span class="va">iris.rrf</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="va">iris</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, ntree<span class="op">=</span><span class="fl">101</span>, proximity<span class="op">=</span><span class="cn">TRUE</span>, oob.prox<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">iris.rrf</span><span class="op">$</span><span class="va">proximity</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  num [1:150, 1:150] 1 0.386 0.347 0.307 0.881 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "dimnames")=List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : chr [1:150] "1" "2" "3" "4" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : chr [1:150] "1" "2" "3" "4" ...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Using weights: make versicolors having 3 times larger weights</span></span></span>
<span class="r-in"><span><span class="va">iris_wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span> <span class="va">iris</span><span class="op">$</span><span class="va">Species</span> <span class="op">==</span> <span class="st">"versicolor"</span>, <span class="fl">3</span>, <span class="fl">1</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">iris.wcrf</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="op">-</span><span class="fl">5</span><span class="op">]</span>, <span class="va">iris</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span>, weights<span class="op">=</span><span class="va">iris_wt</span>, keep.inbag<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">iris.wcrf</span><span class="op">$</span><span class="va">inbag</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 321 316 314 322 320 266 302 296 275 294 294 280 286 312 307 291 285 296 292 316 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 312 286 287 258 310 289 271 287 300 319 286 311 289 296 292 294 291 305 281 293 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  41  42  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 296 294 305 270 340 300 282 311 283 301 888 912 905 874 921 908 899 954 925 933 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 927 906 927 927 941 901 881 934 913 917 910 885 869 904 957 861 878 896 908 936 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  81  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 871 902 879 883 926 905 906 835 890 895 915 902 877 918 974 905 900 889 884 910 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 301 306 287 319 323 278 277 288 315 286 303 277 284 295 312 325 267 312 298 333 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 308 300 306 303 311 301 303 301 287 308 284 296 309 260 291 325 281 272 281 287 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 141 142 143 144 145 146 147 148 149 150 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 305 318 295 328 307 274 341 276 304 265 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">iris.wrrf</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="va">iris</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, weights<span class="op">=</span><span class="va">iris_wt</span>, keep.inbag<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">iris.wrrf</span><span class="op">$</span><span class="va">inbag</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 292 308 324 302 276 290 331 325 290 306 297 298 289 286 293 295 308 296 304 324 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 286 275 307 263 317 287 275 288 297 303 272 294 298 287 267 275 296 263 310 295 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  41  42  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 332 303 315 274 303 303 311 279 278 282 862 901 903 847 882 896 863 924 890 901 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 945 925 930 872 917 903 903 907 904 885 916 898 917 862 958 916 906 901 884 861 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  81  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 895 914 909 900 896 894 893 875 872 928 904 950 900 952 935 878 912 942 929 945 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 285 300 306 312 310 315 302 287 277 279 302 301 298 292 295 306 285 319 304 294 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 323 294 309 315 297 273 297 300 299 289 285 289 317 311 310 350 290 305 312 315 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 141 142 143 144 145 146 147 148 149 150 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 268 338 289 332 293 290 324 264 310 272 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Andy Liaw.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7. Provided without <strong>any warranty</strong>.</p>
</div>

    </footer></div>

  

  

  </body></html>

